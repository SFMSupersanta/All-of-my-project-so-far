<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC
    '-//W3C//DTD XHTML 1.0 Transitional//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html lang="en-us" xmlns='http://www.w3.org/1999/xhtml'>
<head>
   <title>Seneca | School of Computer Studies | Programming Fundamentals Using C</title>

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
   <meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />

   <meta name="Copyright" content="(c) Copyright Seneca College 2004" />
   <meta name="Description" content="Welcome to the Bachelors Degree of Software Development Program Web Site.  On this site you can find the introductory programming course.  Designed by Chris Szalwinski." />
   <meta name="Abstract" content="This subject reviews the principles of procedural programming.  Students study the solution of problems using structured programming techniques with the C programming language.  The emphasis throughout is on the solution of small problems."/>
   <meta name="Author" content="chris.szalwinski@senecac.on.ca"/>
   <meta name="Keywords" content="sofware development, procedural programming, lecture notes"/>

   <link rel="stylesheet" type="text/css" href="style.043.css" tppabs="http://cs.senecac.on.ca/~btp100/pages/style.043.css">
   <link rel="stylesheet" type="text/css" href="styleSPrint.043.css" tppabs="http://cs.senecac.on.ca/~btp100/pages/styleSPrint.043.css" media="screen">
   <link rel="stylesheet" type="text/css" href="stylePPrint.043.css" tppabs="http://cs.senecac.on.ca/~btp100/pages/stylePPrint.043.css" media="print">
</head>

<body>

<table cellspacing="0" cellpadding="0">

   <!-- Body Cell -->
   <tr height="600">
      <!-- Content Area -->
      <td class="tbody" bgcolor="ffffff">
         <table cellpadding="10" width="100%">
            <tr>
               <td bgcolor="ffffff" valign="top">
               <br />
               <center><span class=texth>Module I - Design</span>
               <br />
               <br />
               <span class=texthead>
               Portability and Standards</span>
               <br />
               <br />
               <span class=textagend>
               <br />
               <br />
               </span>
               <p class=quote></p>
               <span class=textagend>
               <a href="#ans">Standard C89</a> |
               <a href="#c99">Standard C99</a> |
               <a href="#pro">Programming Style</a> |
               <a href="#exe">Exercises</a>
               </span>
               </center>
               <br />
               <br />
               <br />

               <p>
               We can compile and execute portable programs on different
               hardware, operating systems or compilers either with no change
               or with minor changes to the header file alone.&nbsp; For example,
               we might change some <span class="code">#define</span>s in the
               header file to suit a new platform, but leave the source file intact.
               </p>
               <p>
               To enable portability, compiler writers agree from time to time
               to provide a common subset of language standards.&nbsp; If we
               restrict our use of the language to the standard subset, we may
               expect to be able to port our programs from one platform
               to another without any modification whatsoever.
               </p>
               <p>
               The first edition of "The C Programming Language"
               by Kernighan and Ritchie published in 1978 provided
               the original description of the C language.&nbsp; Since then,
               the C language has undergone several 'standard' definitions:
               C89, C95 and C99.
               </p>
               <p align="center"><img src="standards.gif" tppabs="http://cs.senecac.on.ca/~btp100/pages/images/standards.gif" width="500" height="150" /></p>
               <br />

               <p id="ans" class=section>Standard C89</p>
               <p>
               In 1982, the American National Standards Institute
               formed a committee (X3J11) to propose a standard for
               C.&nbsp; An international group converted this standard
               with minor modifications into the ISO/IEC 9899:1990
               standard, which ANSI then adopted.&nbsp; This is
               called Standard C.
               </p>
               <p>
               Standard C introduced:
               <ul>
               <li>function prototypes</li>
               <li>new keywords, including <span class=code>signed</span></li>
               <li>a standard library</li>
               <li>whitespace before <span class="code">#</span></li>
               </ul>
               In 1995, ANSI introduced some amendments to Standard C,
               called C95, which included new conversion specifiers for
               <span class=code>printf</span> and <span class=code>scanf</span>
               and numerous new library functions.
               </p>
               <br />

               <p id="c99" class=section>Standard C99</p>
               <p>
               ISO/IEC approved a new international standard in 1999: ISO/IEC 9899:1999 (C99).&nbsp;
               Compiler vendors are gradually updating their compilers and libraries
               to conform to this new standard.
               </p>
               <p>
               C99 introduced the following features:
               <ul>
               <li><span class=code>long long</span> data type</li>
               <li><span class=code>_Bool</span> data type</li>
               <li><span class=code>_Complex</span> data type</li>
               <li>complex arithmetic</li>
               <li>variable-length arrays</li>
               <li><span class=code>//</span> C++ style comments </li>
               <li>better support for floating-point types, including
               math functions for all types</li>
               </ul>
               Microsoft included the <span class=code>long long</span> features in its .net 2003 compiler (version 7.1).&nbsp;
               <span class=code>long long</span> is available with the <span class=code>cc</span> compiler.&nbsp;
               To include <span class=code>//</span>, we add the <span class=code>-qcpluscmt</span> option
               <table width="45%">
               <tr>
               <td>
               <br />
               <pre>
 cc -qcpluscmt source.c</pre><br /></td></tr></table>
               </p>
               <br />

               <p id="pro" class=section>Portability Checks</p>
               <p class="ssection">Programming Styles</p>
               <p>
               Adopting a popular standard may enable you to make
               use of checking tools that support the standard.
               </p>
               <p>
               Two frequently used programming standards:
               <ul>
               <li><a href="javascript:if(confirm('http://www.psgd.org/paul/docs/cstyle/cstyle.htm  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.psgd.org/paul/docs/cstyle/cstyle.htm'" tppabs="http://www.psgd.org/paul/docs/cstyle/cstyle.htm">Indian Hill Style</a></li>
               <li><a href="javascript:if(confirm('http://www.misra.org.uk/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.misra.org.uk/'" tppabs="http://www.misra.org.uk/">MISRA</a></li>
               </ul>
               Some common standards include:
               <ul>
               <li><span class="code">#include</span>s should follow the header
               comments.&nbsp; <span class="code">#define</span>s should follow
               the <span class="code">#include</span>s.&nbsp;</li>
               <li>constants should be of the same data type as the variables
               that the constants initialize,</li>
               <li>avoid declarations that shadow declarations at a higher level,</li>
               <li>split compound conditions into one simple condition per line,</li>
               <li>avoid defaulting a test condition to non-zero,</li>
               <li>compare ot FALSE rather than TRUE,</li>
               <li>comment each fall through in a <span class="code">switch</span>,</li>
               <li>attach unary operators to their operand without spaces,</li>
               <li><span class="code">#define</span> constants in all CAPS,</li>
               <li>avoid names that differ in case only,</li>
               <li>avoid names that look like each other,</li>
               <li>compare a ointer to NULL instead of 0,</li>
               <li>avoid assuming ASCII,</li>
               <li>avoid assumptions about parameter passing and order of evaluation,</li>
               <li>avoid possible side effects such as <span class="code">a[i] = b[i++];</span>,</li>
               <li>use explicit casts when mixing <span class="code">signed</span> and <span class="code">unsigned</span>.&nbsp;</li>
               </ul>
               </p>
               <p class="ssection">Lint Code Checkers</p>
               <p>
               <span class="code">lint</span> is a populer code checker that we
               can use to identify portability problems (or semantic bugs).&nbsp;
               </p>
               <p>
               Consider the followng program
               <table width="45%">
               <tr>
               <td>
               <br />
               <pre>
 /* Use lint for portability
 *  lint.c
 *  BTP100
 *  Nov 30 2004
 */
 #include &lt;stdio.h&gt;

 int main(void) {
     char c;

     c = getchar();

     if (c == EOF)
         printf("End of data\n");
     else
         printf("You entered %c\n", c);

     return 0;
 }</pre><br /></td></tr></table>
               Under normal settings, the <span class="code">cc</span> and
               <span class="code">cl .net</span> compilers compile this
               source code without any warning or error messages.&nbsp;
               </p>
               <p>
               If the user compiles and executes this program on
               <span class="code">phobos</span> and enters "end
               of data" (Ctrl-D), this program prints
               <table width="45%">
               <tr>
               <td>
               <br />
               <pre class="result">
 You entered &#255</pre><br /></td></tr></table>
               If the user compiles and executes this program on
               <span class="code">cl</span> and enters "end of
               data" (Ctrl-Z), this program prints
               <table width="45%">
               <tr>
               <td>
               <br />
               <pre class="result">
 End of data</pre><br /></td></tr></table>
               The discrepancy arises because <span class="code">cc</span> on
               <span class="code">phobos</span> stores <span class="code">char</span>
               as <span class="code">unsigned char</span>, while
               <span class="code">cl</span> stores <span class="code">char</span>
               as <span class="code">signed char</span>.&nbsp;
               To resolve the discrepancy, we declare the character
               <span class="code">c</span> as <span class="code">signed char</span>.
               <table width="45%">
               <tr>
               <td>
               <br />
               <pre>
 /* Use lint for portability
 *  lint.c
 *  BTP100
 *  Nov 30 2004
 */
 #include &lt;stdio.h&gt;

 int main(void) {
     <span class="high">signed</span> char c;

     c = <span class="high">(signed char)</span> getchar();

     if (c == EOF)
         printf("End of data\n");
     else
         printf("You entered %c\n", c);

     return 0;
 }</pre><br /></td></tr></table>
               To identify the portability problem on <span class="code">phobos</span>,
               we can pass the source code through the <span class="code">lint</span>
               code checker:
               <table width="95%">
               <tr>
               <td width="50%">
               <br />
               <pre>
 lint lint.c
 </pre><br /></td>
               <td width="50%">
               <br />
               <pre class="result">
 "lint.c", line 13: warning: comparison of
           unsigned with negative constant</pre><br /></td></tr></table>
               To identify the portability problem on <span class="code">cl .net</span>,
               we change the compiler warning level options to <span class="code">/W4</span>
               (warning level 4) and <span class="code">/WX</span> (treat all warnings as errors).
               <table width="95%">
               <tr>
               <td width="50%">
               <br />
               <pre>
 cl lint.c /W4 /WX



 </pre><br /></td>
               <td width="50%">
               <br />
               <pre class="result">
 lint.c(11) : error C2220: warning treated as error&nbsp;
              - no object file generated
 lint.c(11) : warning C4244: '=' : conversion from
              'int' to 'char', possible loss
              of data</pre><br /></td></tr></table>
               You can find documentation on lint code checkers
               in the AIX <span class="code">man</span> pages
               and here
               <ul>
               <li><a href="javascript:if(confirm('http://docs.sun.com/source/806-3567/lint.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://docs.sun.com/source/806-3567/lint.html'" tppabs="http://docs.sun.com/source/806-3567/lint.html">Lint</a></li>
               <li><a href="javascript:if(confirm('http://lclint.cs.virginia.edu/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://lclint.cs.virginia.edu/'" tppabs="http://lclint.cs.virginia.edu/">LCLint/Splint</a></li>
               </ul>
               </p>
               <br />

               <p id="exe" class="section">Exercises</p>
               <p>
               <ul>
               <li>Check your solution to assignment 4 for portability using a lint code checker.</li>
               </ul>
               </p>
               <br />
               <br />
               <br />
               </td>
            </tr>
         </table>
      </td>
   </tr>

   <!-- Footer -->
   <tr>
      <td class="tbody">
         <table cellpadding="1" width="90%" align="center">
            <tr>
               <td width="50%" class="text3">
                  <script language="javascript">
                  var lh = document.location.href;
                  document.write(lh)
                  </script>&nbsp;&nbsp;
               </td>
               <td width="50%" align="right" class="text3">
                  <script language="javascript">
                  var lm = document.lastModified.slice(0,-3);
                  document.write("Last Modified: " +lm)
                  </script>&nbsp;&nbsp;
               </td>
            </tr>
         </table>
      </td>
   </tr>
</table>

</body>
</html>